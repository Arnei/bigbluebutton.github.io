---
layout: page
title: "Customize"
category: greenlight
date: 2019-04-16 16:29:25
# redirect_from: "/install/Green Light.html"
---

# Customizing Green Light

You can run Green Light outside of Docker, which also makes it easy to customize Green Light (such as changing the landing page).

## Running Green Light as a Rails application

To run Green Light without Docker requires having server with ruby on rails installed, checking out the source code, and running Green Light at the command line as a rails application.  We recommend using a [GitHub](https://github.com/) account to checkout the source for Green Light.

1. [Install Ruby on Rails](https://gorails.com/setup/ubuntu/16.04) on your server (Note: Skip the step which has you install rvm, the built-in version of ruby works fine).
1. Login to your GitHub account (via the web) and fork the [Green Light repository](https://github.com/bigbluebutton/Green Light).
1. Login to your server (via SSH) clone the forked repository with the following command (replace `<GitHub_Username>` with your GitHub username):

   ~~~
   git clone https://github.com/<GitHub_Username>/Green Light.git
   ~~~

1. Next, enter the `Green Light` directory and copy the `sample.env` file to `.env` (this creates a default configuration file):

   ~~~
   cd Green Light
   cp sample.env .env
   ~~~
  
If you want to modify the default configuration file, such as enabling authentication using OAuth2, see [Configuring Green Light 2.0](#configuring-Green Light-20).  At a minimum you'll need to [Setup the BigBlueButton credentials](#setting-bigbluebutton-credentials).

With rails installed, Green Light source checked out, and an `.env.` file created, you can now run Green Light locally like any other rails application. To run Green Light, use the following command:

~~~
bin/rails server --port=3000
~~~

You can test the application by loading the following URL in your browser: [http://localhost:3000](http://localhost:3000).

## Running Green Light on a Docker container
To set up a docker container which can run a local version of Green Light, there are two options.
To begin, start by [Installing Docker](https://docs.docker.com/install/linux/docker-ce/ubuntu/), and ensure you are on an administrative terminal.

### Setting up with Docker
1. Enter the `~/Green Light` directory
2. Run the following command to set up the environment:
  `cp sample.env .env`


3. Create a docker image by running the following (**image name** can be any name of your choosing):
  `docker build -t <image name> .`
  
4. Go to `docker-compose.yml` and edit the entry services->app->image so that it matches <image name>.


### Starting up using `docker compose`

This is the recommended way of running Green Light with a docker image.
Start by [installing docker compose](https://docs.docker.com/compose/install/) if you haven’t installed it yet.

You can verify if you have docker compose installed by running:
`docker-compose -v`


1. Enter the `~/Green Light` directory
2. Run the following command to start the server:
    ```
    docker-compose up -d
    ```
3. Run the following command to take the server down:
    ```
    docker-compose down
    ```


### Starting up using `docker run`
1. Start the server by beginning a docker run (**name** can be any name of your choosing):
  ```
  docker run --restart unless-stopped -d -p 5000:80 -v $(pwd)/db/production:/usr/src/app/db/production --env-file .env --name <name> <image name>
  ```


2. To stop and remove the docker container:
  ```
  docker stop Green Light-v2
  docker rm Green Light-v2
  ```

No matter which method you use to start the container, you should now be able to see the landing page through the endpoint [http://0.0.0.0/b/](http://0.0.0.0/b/)


## Updating Docker with code changes

For each code change, you will have to rebuild the docker image.
To do this, enter the following commands:

    docker image rm <image name>
    docker build -t <image name> .

## Customizing the Landing Page

A common customization is to modify the default landing page. For a simple change, let's rename the welcome banner to say “Welcome to MyServer”.

The welcome banner is generated by [index.html.erb](https://github.com/bigbluebutton/Green Light/blob/master/app/views/main/index.html.erb).  To customize this message, open `app/views/main/index.html.erb` in an editor.

~~~erb
<%
# BigBlueButton open source conferencing system - http://www.bigbluebutton.org/.
# Copyright (c) 2018 BigBlueButton Inc. and by respective authors (see below).
# This program is free software; you can redistribute it and/or modify it under the
# terms of the GNU Lesser General Public License as published by the Free Software
# Foundation; either version 3.0 of the License, or (at your option) any later
# version.
#
# BigBlueButton is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.
# You should have received a copy of the GNU Lesser General Public License along
# with BigBlueButton; if not, see <http://www.gnu.org/licenses/>.
%>

<% unless flash.empty? %>
  <%= render "shared/error_banner" do %>
    <% flash.each do |key, value| %>
      <%= content_tag :div, value, class: "flash #{key} d-inline" %>
    <% end %>
  <% end %>
<% end %>

<div class="background">
  <div class="container pt-9 pb-8">
    <div class="row">
      <div class="col-md-12 col-sm-12 text-center">
        <h1 id="main-text" class="display-4 mb-4"> <%= t("landing.welcome").html_safe %></h1>
        <p class="lead offset-lg-2 col-lg-8 col-sm-12 "><%= t("landing.about", href: link_to(t("Green Light"), "https://bigbluebutton.org/2018/07/09/Green Light-2-0/", target: "_blank")).html_safe %></p>
        <%= link_to "https://youtu.be/Hso8yLzkqj8", target: "_blank" do %>
          <h4><%= t("landing.video") %> <i class="far fa-play-circle ml-1"></i></h4>
        <% end %>
      </div>

    </div>
  </div>
</div>

<%= render "shared/features" %>


<script>
var cycleImages = function(){
  var images = $('.img-cycle img');
  var now = images.filter(':visible');
  var next = now.next().length ? now.next() : images.first();
  var speed = 1500;
  now.fadeOut(speed);
  next.fadeIn(speed);
}
$(function() {
  setInterval(cycleImages, 5000);
});
</script>
~~~

This is an Embedded RuBy (ERB) file.   Look for the following line:

~~~html
<h1 id="main-text" class="display-4 mb-4"> <%= t("landing.welcome").html_safe %></h1>
~~~

The function `t("landing.welcome")` retrieves the localized version of the label `welcome.message`.  For English, this retrieves the string from [en.yml](https://github.com/bigbluebutton/Green Light/blob/master/config/locales/en.yml).  Edit `config/locales/en.yml` and look for the following section:

~~~yml
  landing:
    about: "%{href} is a simple front-end for your BigBlueButton open-source web conferencing server. You can create your own rooms to host sessions, or join others using a short and convenient link."
    welcome: Welcome to BigBlueButton.
    video: Watch our tutorial on using Green Light
    upgrade: Show me how to upgrade to 2.0!
    version: We've released a new version of Green Light, but your database isn't compatible.
~~~

To change the welcome message, modify the text associated with `landing.welcome` to say "Welcome to MyServer".

~~~yml
    welcome: Welcome to MyServer
~~~

Save the change to `en.yml`.  Refresh the landing page in your browser.  The welcome message should have the new text.

![Updated login](/images/Greenlight/gl-welcome-to-my-server.png)


## Enabling Omniauth

To enable Omniauth, you will require a hostname that ends with a **top level domain** (e.g “.com”, “.ca”, etc).

To do this you can add a hostname to your computer which ends in a **top level domain**:

- [Adding hosts for linux](https://www.cyberciti.biz/faq/ubuntu-change-hostname-command/)
- [Adding hosts for Windows](https://support.rackspace.com/how-to/modify-your-hosts-file/)
- [Adding hosts for Mac](https://www.tekrevue.com/tip/edit-hosts-file-mac-os-x/)

After properly adding the new hostname, run the following:

    bin/rails server --binding=<hostname>

You should see that the URL contains the hostname with the top level domain:

![](https://d2mxuefqeaa7sj.cloudfront.net/s_860B5671A1EBC17AA9B4E38FD1C99F6FBD35D15FD13FAFC83B3C452349A53D30_1538074544244_image.png)


Once everything works, you can [configure Omniauth](http://docs.bigbluebutton.org/install/Green Light-v2.html#user-authentication).

After configuring Omniauth, you should be able to gain full access to Omniauth signup:

![](https://d2mxuefqeaa7sj.cloudfront.net/s_860B5671A1EBC17AA9B4E38FD1C99F6FBD35D15FD13FAFC83B3C452349A53D30_1538074632840_image.png)

# Troubleshooting Green Light

Sometimes there are missteps and incompatibility issues when setting up applications.

## Checking the Logs

The best way for determining the root cause of issues in your Green Light application is to check the logs.

### If you’re running Ruby on Rails
The logs should be located under `app/log`from the `~/Green Light` directory.

Depending on whether you are running on development or production, you may need to check either:

1. `app/log/development.log`
2. `app/log/production.log`

### If you’re running with Docker
Docker is always running on a production environment, so the logs will be located in `log/production.log` from the `~/Green Light` directory.

## Common issues with Running Ruby on Rails

### Address already in use
If you get an error similar to the following:

```
Address already in use - bind(2) for "0.0.0.0" port 3000 (Errno::EADDRINUSE)
```

Then you are trying to start a server on an endpoint that is already in use. If this scenario occurs, there are two solutions:



1. **Use another port.**


    By default, rails servers are always started using localhost and port 3000. If you receive this error statement, it means that you have a process that is currently using that port.


    In this case, you can get your server to start with a different port by running the following:
      ```
      bin/rails server -p <port number>
      ```


    A common port number that isn’t usually in use is **3001**.
    In this case, **the endpoint you use to access the server will also change.**


    For example, if you used to access [http://localhost:3000](http://localhost:3000) and change your new endpoint to 3001, you will need to access [http://localhost:3001](http://localhost:3001).


2. **Kill the existing process that is using the endpoint.**


    Before doing this, make sure that the process you are running isn’t important. Then you can run the following command to kill the server:
      ```
      kill -9 <PID>
      ```

### Development related issues
At this stage, there are no more problems with the “setup” of the app and further troubleshooting requires an understanding of Ruby on Rails.

[Follow this guide](https://guides.rubyonrails.org/debugging_rails_applications.html) to help learn common strategies for debugging Ruby on Rails applications. It will help in the long run!


## Common issues with Docker

### Changes not appearing
If you made changes to the code and are running a docker container from a docker image, you will need to **rebuild** the image to see changes appear.

In the case of environment related changes (modifying the `.env` file), you will only need to restart the container.

See also
  * [Overview](/greenlight/gl-overview.html)
  * [Install](/greenlight/gl-install.html)
  * [Admin Guide](/greenlight/gl-admin.html)

